# Cloudflare Pages redirects with placeholders
# Docs: https://developers.cloudflare.com/pages/configuration/redirects/

# Root should serve `index.html` (language detection + fallback links) to avoid an extra 301 hop.

# Normalize common host/protocol variants (when supported by the platform)
http://noctalia.app/* https://noctalia.app/:splat 301
http://www.noctalia.app/* https://noctalia.app/:splat 301
https://www.noctalia.app/* https://noctalia.app/:splat 301

# Redirect index.html files to directory root
/index.html / 301
/index / 301
/:lang/index.html /:lang/ 301
/:lang/index /:lang/ 301
/:lang/blog/index.html /:lang/blog/ 301
/:lang/blog/index /:lang/blog/ 301
/:lang/guides/index.html /:lang/guides/ 301
/:lang/guides/index /:lang/guides/ 301

# Normalize a few legacy French slugs containing diacritics
/fr/blog/rêves-ex-partenaire.html /fr/blog/reves-ex-partenaire 301
/fr/blog/rêves-ex-partenaire /fr/blog/reves-ex-partenaire 301
/fr/blog/rêves-de-voler.html /fr/blog/reves-de-voler 301
/fr/blog/rêves-de-voler /fr/blog/reves-de-voler 301
/fr/blog/rêves-dents-qui-tombent.html /fr/blog/reves-dents-qui-tombent 301
/fr/blog/rêves-dents-qui-tombent /fr/blog/reves-dents-qui-tombent 301

# Redirect legacy renamed slugs (avoid soft-404 fallback to home)
/fr/blog/comment-se-souvenir-reves.html /fr/blog/comment-se-souvenir-de-ses-reves 301
/fr/blog/comment-se-souvenir-reves /fr/blog/comment-se-souvenir-de-ses-reves 301
/fr/blog/reves-poursuite.html /fr/blog/reves-etre-poursuivi 301
/fr/blog/reves-poursuite /fr/blog/reves-etre-poursuivi 301
/fr/blog/reves-recurrents.html /fr/blog/signification-reves-recurrents 301
/fr/blog/reves-recurrents /fr/blog/signification-reves-recurrents 301
/es/blog/como-recordar-tus-suenos.html /es/blog/como-recordar-suenos 301
/es/blog/como-recordar-tus-suenos /es/blog/como-recordar-suenos 301
/es/condiciones.html /es/terminos 301
/es/condiciones /es/terminos 301
/fr/conditions-utilisation /fr/cgu 301
/fr/conditions-utilisation.html /fr/cgu 301

# Redirect all .html pages to clean URLs (301 permanent)
# Pattern-based redirects for blog, guides, and localized pages
/:lang/blog/:slug.html /:lang/blog/:slug 301
/:lang/guides/:slug.html /:lang/guides/:slug 301
/:lang/:page.html /:lang/:page 301

# Legacy typo: keep old screenshot URLs working
/screenshoot/* /screenshot/:splat 301

# Root level legacy French pages (no lang prefix)
/cgu.html /fr/cgu 301
/cgu /fr/cgu 301
/mentions-legales.html /fr/mentions-legales 301
/mentions-legales /fr/mentions-legales 301
/politique-confidentialite.html /fr/politique-confidentialite 301
/politique-confidentialite /fr/politique-confidentialite 301
/suppression-compte.html /fr/suppression-compte 301
/suppression-compte /fr/suppression-compte 301

# Legacy/unknown entrypoints
/fr/conditions.html /fr/cgu 301
/fr/conditions /fr/cgu 301
/waitlist /en/ 301
