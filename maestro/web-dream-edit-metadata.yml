url: "http://localhost:8081"
---
- launchApp
- assertVisible: "(Whisper your dream into the ether.*|Chuchote)"
- tapOn: "(See dream journal|Voir journal)"
- waitForAnimationToEnd
- runFlow:
    when:
      visible:
        id: "tab.settings"
    commands:
      - tapOn:
          id: "tab.settings"
- runFlow:
    when:
      visible: "(Settings|Param.tres)"
    commands:
      - tapOn: "(Settings|Param.tres)"
- waitForAnimationToEnd
- assertVisible: "(Settings|Param.tres)"
- runFlow:
    when:
      visible: "(Sign Out|Se d.connecter)"
    commands:
      - tapOn: "(Sign Out|Se d.connecter)"
      - waitForAnimationToEnd
- runFlow:
    when:
      visible: "(Quick sign-in.*|Connexion rapide.*)"
    commands:
      - tapOn: "(Existing user|Utilisateur existant)"
      - waitForAnimationToEnd
- assertVisible: "mock\\.existing@dreamer\\.app"
- runFlow:
    when:
      visible:
        id: "tab.journal"
    commands:
      - tapOn:
          id: "tab.journal"
- runFlow:
    when:
      visible: "Journal"
    commands:
      - tapOn: "Journal"
- waitForAnimationToEnd
- tapOn: "The Infinite Library"
- waitForAnimationToEnd
- assertVisible: "The Infinite Library"
- scrollUntilVisible:
    element:
      id: "btn.editMetadata"
    direction: DOWN
    visibilityPercentage: 20
    centerElement: true
- tapOn:
    id: "btn.editMetadata"
    retryTapIfNoChange: true
    waitToSettleTimeoutMs: 500
- waitForAnimationToEnd
- scrollUntilVisible:
    element:
      id: "chip.type.Nightmare"
    direction: UP
    visibilityPercentage: 20
    centerElement: true
- tapOn:
    id: "chip.type.Nightmare"
- scrollUntilVisible:
    element:
      id: "btn.editMetadata"
    direction: DOWN
    visibilityPercentage: 20
    centerElement: true
- tapOn:
    id: "btn.editMetadata"
    retryTapIfNoChange: true
    waitToSettleTimeoutMs: 500
- waitForAnimationToEnd
- assertVisible: "Nightmare"
- tapOn:
    id: "btn.navigateJournal"
- waitForAnimationToEnd
- assertVisible: "(Dream Journey|Voyage onirique|Viaje on.rico)"
- runFlow:
    when:
      visible:
        id: "tab.settings"
    commands:
      - tapOn:
          id: "tab.settings"
- runFlow:
    when:
      visible: "(Settings|Param.tres)"
    commands:
      - tapOn: "(Settings|Param.tres)"
- waitForAnimationToEnd
- runFlow:
    when:
      visible: "(Sign Out|Se d.connecter)"
    commands:
      - tapOn: "(Sign Out|Se d.connecter)"
      - waitForAnimationToEnd
- runFlow:
    when:
      visible: "(Quick sign-in.*|Connexion rapide.*)"
    commands:
      - tapOn: "(Existing user|Utilisateur existant)"
      - waitForAnimationToEnd
- assertVisible: "mock\\.existing@dreamer\\.app"
- runFlow:
    when:
      visible:
        id: "tab.journal"
    commands:
      - tapOn:
          id: "tab.journal"
- runFlow:
    when:
      visible: "Journal"
    commands:
      - tapOn: "Journal"
- waitForAnimationToEnd
- assertVisible: "The Infinite Library"
