appId: com.tanuki75.dreamapp
---
# Verify that after saving a dream from the recording screen
# the first-dream bottom sheet appears with next-step actions

- launchApp
- runFlow:
    when:
      visible:
        id: tab.journal
    commands:
      - tapOn:
          id: tab.journal
      - waitForAnimationToEnd
- runFlow:
    when:
      visible:
        id: screen.journal
    commands:
      - pressKey: back
      - scrollUntilVisible:
          element:
            id: btn.addDream
          direction: DOWN
      - tapOn:
          id: btn.addDream
      - waitForAnimationToEnd
- assertVisible:
    id: screen.recording
- tapOn:
    id: input.dreamTranscript
- inputText: "Bottom sheet e2e dream"
- tapOn:
    id: btn.saveDream
- waitForAnimationToEnd
# Bottom sheet should be visible (multi-language title)
- assertVisible:
    id: text.firstDream.title

# Use the journal CTA to open the dream journal
- tapOn:
    id: btn.firstDream.journal
- waitForAnimationToEnd

# We should land on the journal screen and see the dream title in the list
- assertVisible:
    id: screen.journal
- assertVisible: "Bottom sheet e2e dream"
